import{b as f,c as m,d as v}from"./chunk-ZMQNNO6W.js";import{d as g}from"./chunk-TN7LRJOG.js";import{f as b,ha as d,ma as p,t as s,x as u}from"./chunk-L2AW7WK7.js";var l=b(v()),c=class{constructor(){}static isTokenExpired(t,r){if(!t||t==="")return!0;let e=this._getTokenExpirationDate(t);return r=r||0,e===null?!0:!(e.valueOf()>new Date().valueOf()+r*1e3)}static _b64decode(t){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="";if(t=String(t).replace(/=+$/,""),t.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let i=0,a,o,S=0;o=t.charAt(S++);~o&&(a=i%4?a*64+o:o,i++%4)?e+=String.fromCharCode(255&a>>(-2*i&6)):0)o=r.indexOf(o);return e}static _b64DecodeUnicode(t){return decodeURIComponent(Array.prototype.map.call(this._b64decode(t),r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""))}static _urlBase64Decode(t){let r=t.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:{r+="==";break}case 3:{r+="=";break}default:throw Error("Illegal base64url string!")}return this._b64DecodeUnicode(r)}static _decodeToken(t){if(!t)return null;let r=t.split(".");if(r.length!==3)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");let e=this._urlBase64Decode(r[1]);if(!e)throw new Error("Cannot decode the token.");return JSON.parse(e)}static _getTokenExpirationDate(t){let r=this._decodeToken(t);if(!r.hasOwnProperty("exp"))return null;let e=new Date(0);return e.setUTCSeconds(r.exp),e}static secondsToFormat(t,r=!1){let e=Math.floor(t/86400);t-=e*86400;let i=Math.floor(t/3600);t-=i*3600;let a=Math.floor(t/60);return t-=a*60,t=Math.floor(t),e>0?`${e.toString().padStart(2,"0")}d ${i.toString().padStart(2,"0")}h ${a.toString().padStart(2,"0")}m ${r?t.toString().padStart(2,"0")+"s":""}`:i>0?`${i.toString().padStart(2,"0")}h ${a.toString().padStart(2,"0")}m ${r?t.toString().padStart(2,"0")+"s":""}`:a>0?`${a.toString().padStart(2,"0")}m ${t.toString().padStart(2,"0")}s`:t>0?`${t.toString().padStart(2,"0")}s`:"00"}static getSeconds(t,r){var e=(0,l.default)(t).valueOf(),i=(0,l.default)(r).valueOf(),a=(i-e)/1e3;return Math.abs(Math.round(a))}};var h=class n{constructor(t,r){this._httpClient=t;this._storageService=r}signIn(t){return u(this._httpClient.post(f.LOGIN,t))}signOut(){this._storageService.clearLocalStorage()}check(){let t=this._storageService.getSessionToken();return t?c.isTokenExpired(t)?s(!1):s(!0):s(!1)}static \u0275fac=function(r){return new(r||n)(p(g),p(m))};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};export{c as a,h as b};
