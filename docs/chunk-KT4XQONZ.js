import{a as z}from"./chunk-6MYVVFJR.js";import{a as N}from"./chunk-MIVGW3YF.js";import{d as M,f as L}from"./chunk-EIFYYTBY.js";import{B as V,S as $,g as E,m as j,n as A,o as B,p as T,qa as q,r as G,s as U,t as O,v as R,w as k,x as P}from"./chunk-JBASF3LD.js";import"./chunk-RGNDWIHZ.js";import{p as D}from"./chunk-TN7LRJOG.js";import{s as x,t as y}from"./chunk-MKB6ZC6F.js";import{Ab as u,Gb as g,Hb as b,Ib as _,Jb as i,Kb as o,Vb as I,eb as a,fb as p,fc as s,g as h,gc as C,hc as c,ia as S,ra as f,rc as F,sa as v,tc as w}from"./chunk-L2AW7WK7.js";function K(n,e){if(n&1&&(i(0,"mat-option",5),s(1),o()),n&2){let t=e.$implicit;u("value",t.id),a(),C(t.name)}}var d=class n{constructor(e,t,r,m,l){this._fb=e;this._shopService=t;this._utilService=r;this._storageService=m;this._userService=l}searchForm;shopDropdown=null;shopId=null;statistics=null;ngOnInit(){this.searchForm=this._fb.group({shopId:new B(null)}),this.getShopList()}changeShop(e){return h(this,null,function*(){try{e.value&&(this.shopId=e.value,this._storageService.setCurrentShopAccess(e.value)),this._utilService.showLoader(),this.statistics=yield this._userService.getStatistics(this.shopId)}catch(t){this._utilService.showErrorSnack(t)}finally{this._utilService.hideLoader()}})}getShopList(){return h(this,null,function*(){try{this._utilService.showLoader(),this.shopDropdown=yield this._shopService.getShopListByAccess();let e=this._storageService.getCurrentShopAccess();e?this.shopId=e:(this.shopId=this.shopDropdown.length>0?this.shopDropdown[0].id:null,this.shopId!=null&&this._storageService.setCurrentShopAccess(this.shopId)),this.searchForm.patchValue({shopId:this.shopId}),this.statistics=yield this._userService.getStatistics(this.shopId)}catch(e){this._utilService.showErrorSnack(e)}finally{this._utilService.hideLoader()}})}static \u0275fac=function(t){return new(t||n)(p(O),p(z),p(L),p(M),p(N))};static \u0275cmp=f({type:n,selectors:[["app-dashboard"]],decls:32,vars:7,consts:[[1,"w-full","p-8"],["action","",3,"formGroup"],[1,"grid","md:grid-cols-4","grid-cols-1","gap-4","my-2"],[1,"w-full","fuse-mat-dense"],["placeholder","Shop","formControlName","shopId",3,"selectionChange"],[3,"value"],[1,"w-full","bg-[white]","rounded","box-shadow","mb-5","p-6","pt-5"],[1,"text-primary","text-xl","font-bold","mb-5"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","w-full"],[1,"p-4","bg-[#DDE8FF]","shadow","rounded","active:bg-primary-100","focus:bg-primary-100","hover:bg-primary-100"],[1,"text-center","font-medium","mt-2"],[1,"text-5xl","font-bold","leading-none","text-[#729AF2]"],[1,"p-4","bg-[#FFF6E8]","shadow","rounded","active:bg-amber-100","focus:bg-amber-100","hover:bg-amber-100"],[1,"text-5xl","font-bold","leading-none","text-[#EFB766]"],[1,"p-4","bg-[#FFEDEF]","shadow","rounded","active:bg-red-100","focus:bg-red-100","hover:bg-red-100"],[1,"text-5xl","font-bold","leading-none","text-[#E57975]"]],template:function(t,r){if(t&1&&(i(0,"div",0)(1,"form",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),s(5,"Current Shop"),o(),i(6,"mat-select",4),I("selectionChange",function(l){return r.changeShop(l)}),b(7,K,2,2,"mat-option",5,g),o()()()(),i(9,"div",6)(10,"h2",7),s(11,"Statistics"),o(),i(12,"div",8)(13,"button",9)(14,"p",10),s(15,"Total Customer"),o(),i(16,"div")(17,"p",11),s(18),o()()(),i(19,"button",12)(20,"p",10),s(21,"Total Invoice"),o(),i(22,"div")(23,"p",13),s(24),o()()(),i(25,"button",14)(26,"p",10),s(27,"Total Selling"),o(),i(28,"div")(29,"p",15),s(30),F(31,"number"),o()()()()()()),t&2){let m,l;a(),u("formGroup",r.searchForm),a(6),_(r.shopDropdown),a(11),c(" ",(m=r.statistics==null?null:r.statistics.totalCustomer)!==null&&m!==void 0?m:0," "),a(6),c(" ",(l=r.statistics==null?null:r.statistics.totalInvoice)!==null&&l!==void 0?l:0," "),a(6),c(" ",w(31,4,r.statistics==null?null:r.statistics.totalSellingAmount,".2-2")," ")}},dependencies:[E,V,P,$,T,j,A,G,U,x],styles:[".box-shadow[_ngcontent-%COMP%]{box-shadow:0 0 30px #80808026}"]})};var Q=[{path:"",component:d}],H=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=v({type:n});static \u0275inj=S({imports:[y,q,R,k,D.forChild(Q)]})};export{H as DashboardModule};
